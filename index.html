<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Finance App</title>
    <link rel="stylesheet" href="styles.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Meta tags per PWA -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Finance">

    <!-- Icone per iOS -->
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Registrazione Service Worker -->
    <script>
    if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
        window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
            .then(registration => console.log('SW registrato:', registration))
            .catch(error => console.log('SW errore:', error));
        });
    }
    </script>

</head>
<body>
    <!-- Header -->
        <header class="app-header">
            <div class="header-center" id="headerCenter">
                <h1 id="pageTitle" class="header-title">
                  <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="12" width="4" height="8"/><rect x="9" y="8" width="4" height="12"/><rect x="15" y="4" width="4" height="16"/></svg>
                  <span id="pageTitleText">Personal Finance App</span>
                </h1>
                <div class="header-actions">
                    <button id="toggleBalanceVisibility" class="balance-toggle-btn" aria-label="Mostra saldi">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    </button>
                    <button id="closeEditBtn" class="balance-toggle-btn hidden" aria-label="Chiudi modifica" style="margin-left: 8px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                    <div class="profile-status-box" id="profileStatusBox">
                        <div class="profile-avatar" id="profileAvatar">
                          <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profilo" />
                        </div>
                    </div>
                </div>
            </div>
        </header>
    <div class="app-container">
        <!-- Main Content -->
        <main class="app-main">
            <!-- Dashboard Page -->
            <section id="dashboardPage" class="page active">
                <div class="welcome-message" id="welcomeMessage"></div>
                <div class="dashboard-grid">
                    <!-- Net Worth Card -->
                    <div class="balance-card">
                    <div class="balance-amount balance-value" id="totalBalance">â‚¬ 0,00</div>
                        <div class="balance-label">Net Worth</div>
                    </div>

                    <!-- Section heading for current month metrics -->
                    <h2 class="section-title">Questo mese</h2>

                    <!-- Quick Stats -->
                    <div class="stats-grid">
                        <div class="stat-card stat-card--income">
                            <div class="stat-icon"> <!-- ðŸ“ˆ -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 17 9 11 13 15 21 7"/></svg>
</div>
                            <div class="stat-content">
                            <div class="stat-value balance-value" id="monthlyIncome">â‚¬ 0</div>
                                <div class="stat-label">Entrate mese</div>
                                <div class="stat-change" id="incomeChange">+0%</div>
                            </div>
                        </div>
                        <div class="stat-card stat-card--expense">
                            <div class="stat-icon"> <!-- ðŸ“‰ -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 7 9 13 13 9 21 17"/></svg>
</div>
                            <div class="stat-content">
                            <div class="stat-value balance-value" id="monthlyExpenses">â‚¬ 0</div>
                                <div class="stat-label">Uscite mese</div>
                                <div class="stat-change" id="expenseChange">+0%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Monthly Net + Spending % Grid -->
                    <div class="stats-grid">
                        <!-- Monthly Net Balance Box (Entrate - Uscite) -->
                        <div class="stat-card stat-card--net">
                            <div class="stat-icon"> <!-- âž–/âž• -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
 </div>
                            <div class="stat-content">
                                <div class="stat-value balance-value" id="monthlyNet">â‚¬ 0</div>
                                <div class="stat-label">Saldo del mese</div>
                            </div>
                        </div>
                        
                        <!-- Monthly Spending Percentage Box (Uscite/Entrate * 100) -->
                        <div class="stat-card stat-card--spending">
                            <div class="stat-icon"> <!-- % -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="5" x2="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>
 </div>
                            <div class="stat-content">
                                <div class="stat-value balance-value" id="monthlySpendingPct">0%</div>
                                <div class="stat-label">Speso del mese</div>
                            </div>
                        </div>
                    </div>

                    <!-- Saving Rate Card -->
                    <div class="saving-rate-card">
                        <div class="saving-rate-content">
                            <div class="saving-rate-icon"> <!-- ðŸŽ¯ -->
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
</div>
                            <div class="saving-rate-info">
                            <div class="saving-rate-value balance-value" id="savingRate">0%</div>
                                <div class="saving-rate-label">Saving Rate</div>
                                <div class="saving-rate-change" id="savingRateChange">+0%</div>
                            </div>
                            <div class="saving-rate-indicator" id="savingRateIndicator">
                                <div class="indicator-text">Neutro</div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Card -->
                    <div class="analytics-card">
                        <div class="card-title"> <!-- ðŸ“Š Analytics Avanzate -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="12" width="4" height="8"/><rect x="9" y="8" width="4" height="12"/><rect x="15" y="4" width="4" height="16"/></svg>
  Analytics Avanzate
</div>
                        <div class="analytics-content analytics-content-row">
                            <p class="analytics-subtitle">Visualizza report dettagliati e grafici avanzati</p>
                            <button class="btn btn--analytics" onclick="openLookerStudio()">
                                ðŸš€ Apri Dashboard
                            </button>
                        </div>
                    </div>

                    <!-- Accounts List -->
                    <div class="card">
                        <div class="card-title"> <!-- ðŸ¦ I tuoi conti -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="10" width="18" height="10"/><polygon points="12,3 2,10 22,10"/></svg>
  I tuoi conti
</div>
                        <div class="accounts-list" id="accountsList">
                            <div class="skeleton skeleton--text"></div>
                            <div class="skeleton skeleton--text"></div>
                            <div class="skeleton skeleton--text"></div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="card">
                        <div class="card-title"> <!-- ðŸ•’ Transazioni recenti -->
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
  Transazioni recenti
</div>
                        <div id="recentTransactions">
                            <div class="skeleton skeleton--text"></div>
                            <div class="skeleton skeleton--text"></div>
                            <div class="skeleton skeleton--text"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Transactions Page -->
            <section id="transactionPage" class="page">
                
                <div class="transactions-list" id="transactionsList">
                    <div class="skeleton skeleton--text"></div>
                    <div class="skeleton skeleton--text"></div>
                    <div class="skeleton skeleton--text"></div>
                </div>
            </section>

            <!-- Add Transaction Page -->
            <section id="addTransactionPage" class="page">
                <form id="transactionForm" class="transaction-form">
                    <!-- Transaction Type -->
                    <div class="form-group">
                        <div class="tipo-buttons">
                                <!-- Tipo transazione: Spesa -->
                                <button type="button" class="tipo-btn tipo-btn--expense active" data-tipo="spesa">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
                                    Spesa
                                </button>
                                <!-- Tipo transazione: Entrata -->
                                <button type="button" class="tipo-btn tipo-btn--income" data-tipo="entrata">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                    Entrata
                                </button>
                                <!-- Tipo transazione: Trasferimento -->
                                <button type="button" class="tipo-btn tipo-btn--transfer" data-tipo="trasferimento">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-3"/><path d="M12 3v6m0 0l3-3m-3 3L9 6"/></svg>
                                    Trasferimento
                                </button>
                        </div>
                        <input type="hidden" id="tipo" name="tipo" value="spesa">
                    </div>

                    <!-- Amount -->
                    <div class="form-group form-group--amount">
                        <label class="form-label form-label--large" for="importo">Importo â‚¬</label>
                        <input type="text" 
                               id="importo" 
                               name="importo" 
                               class="form-input form-input--amount"
                               placeholder="0,00"
                               inputmode="decimal"
                               required>
                    </div>

                    <!-- Account -->
                    <div class="form-group">
                        <label class="form-label" for="conto">Conto</label>
                        <select id="conto" name="conto" class="form-select" required>
                            <!-- Placeholder caricamento -->
                            <option value=""><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="8" r="7"/><path d="M8 1v2M8 13v2M1 8h2M13 8h2M3.22 3.22l1.42 1.42M11.36 11.36l1.42 1.42M3.22 12.78l1.42-1.42M11.36 4.64l1.42-1.42"/></svg> Caricamento...</option>
                        </select>
                    </div>

                    <!-- Destination Account (hidden by default) -->
                    <div class="form-group hidden" id="contoDestinazioneGroup">
                        <label class="form-label" for="contoDestinazione">Conto destinazione</label>
                        <select id="contoDestinazione" name="contoDestinazione" class="form-select">
                            <option value="">Seleziona destinazione...</option>
                        </select>
                    </div>

                    <!-- Category -->
                    <div class="form-group" id="categoriaGroup">
                        <label class="form-label" for="categoria">Categoria</label>
                        <select id="categoria" name="categoria" class="form-select" required>
                            <!-- Placeholder caricamento categoria -->
                            <option value=""><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="8" r="7"/><path d="M8 1v2M8 13v2M1 8h2M13 8h2M3.22 3.22l1.42 1.42M11.36 11.36l1.42 1.42M3.22 12.78l1.42-1.42M11.36 4.64l1.42-1.42"/></svg> Caricamento...</option>
                        </select>
                    </div>

                    <!-- Subcategory -->
                    <div class="form-group" id="sottocategoriaGroup">
                        <label class="form-label" for="sottocategoria">Sottocategoria</label>
                        <select id="sottocategoria" name="sottocategoria" class="form-select">
                            <option value="">Prima seleziona la categoria</option>
                        </select>
                    </div>

                    <!-- Description -->
                    <div class="form-group autocomplete-container">
                        <label class="form-label" for="descrizione">Descrizione</label>
                        <input type="text" 
                               id="descrizione" 
                               name="descrizione" 
                               class="form-input"
                               placeholder="Inizia a scrivere..."
                               autocomplete="off">
                        <div id="descrizioneSuggestions" class="autocomplete-suggestions"></div>
                    </div>

                    <!-- Tags -->
                    <div class="form-group">
                        <label class="form-label">Etichette</label>
                        <div class="tags-container">
                            <div class="tags-display" id="tagsDisplay">
                                <input type="text" 
                                       class="tags-input" 
                                       id="tagsInput" 
                                       placeholder="Aggiungi etichetta e premi Invio">
                            </div>
                            <input type="hidden" id="etichetta" name="etichetta">
                        </div>
                    </div>

                    <!-- Date -->
                    <div class="form-group">
                        <label class="form-label" for="data">Data</label>
                        <input type="date" id="data" name="data" class="form-input" required>
                    </div>

                        <!-- Bottoni azione - Rimosso il bottone non sticky, rimane solo quello sticky -->
                </form>
                <div id="message" class="message hidden"></div>
            </section>

            <!-- Shared Page -->
            <section id="sharedPage" class="page">
                <div class="card">
                    <div class="card-title"> <!-- ðŸ‘¥ Transazioni Condivise -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
  Transazioni Condivise
</div>
                    <div style="text-align: center; padding: 60px 20px; color: #666;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ðŸš§</div>
                        <div style="font-weight: 500; margin-bottom: 8px;">Sezione in costruzione</div>
                        <div style="font-size: 14px; color: #999;">
                            Qui potrai vedere le transazioni condivise con altri utenti
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Page -->
            <section id="settingsPage" class="page">
                <div class="settings-grid">
                    <!-- User Personalization -->
                    <div class="card">
                        <div class="card-title"> <!-- ðŸ‘¤ Personalizzazione -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"/><path d="M5.5 21h13a2 2 0 0 0 2-2v-2a7 7 0 0 0-7-7h-2a7 7 0 0 0-7 7v2a2 2 0 0 0 2 2z"/></svg>
  Personalizzazione
</div>
                        <div class="settings-item">
                            <div class="settings-description" style="flex-grow: 1;">
                                <label for="userNameInput" class="settings-label" style="margin-bottom: var(--space-sm);">Il tuo nome</label>
                                <input type="text" id="userNameInput" class="form-input" placeholder="Come ti chiami?" style="margin-bottom: var(--space-md);">
                            </div>
                            <!-- Il pulsante Salva Ã¨ stato spostato piÃ¹ in basso -->
                        </div>

                        <div class="settings-item">
                            <div class="settings-description" style="flex-grow: 1;">
                                <label for="defaultBalanceVisibilityToggle" class="settings-label">Mostra saldi all'avvio</label>
                                <span class="settings-sublabel">Decidi se i saldi sono visibili o nascosti quando apri l'app.</span>
                            </div>
                            <label class="switch" style="align-self: center;"> <!-- Semplice toggle switch CSS -->
                                <input type="checkbox" id="defaultBalanceVisibilityToggle">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="settings-item">
                            <div class="settings-description" style="flex-grow: 1;">
                                <label for="defaultHomepageSelect" class="settings-label">Pagina iniziale predefinita</label>
                                <span class="settings-sublabel">Scegli quale pagina visualizzare all'avvio.</span>
                            </div>
                            <select id="defaultHomepageSelect" class="form-select" style="max-width: 180px; align-self: center;">
                                <option value="dashboard">Dashboard</option>
                                <option value="transaction">Transazioni</option>
                                <option value="addTransaction">Aggiungi</option>
                            </select>
                        </div>
                        <button class="btn btn--primary" id="saveUserPreferencesBtn" style="width: 100%; margin-top: var(--space-lg);">Salva Preferenze</button>
                        <div id="userPreferencesMessage" class="message hidden" style="margin-top: var(--space-md);"></div>
                    </div>
                    <!-- Configurazione Backend -->
                    <div class="card"> <!-- Modificato per usare .card -->
                        <div class="card-title"> <!-- âš™ï¸ Configurazione Backend -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 5 15.4a1.65 1.65 0 0 0-1.51-1V13a2 2 0 0 1 0-4v-.09A1.65 1.65 0 0 0 4.6 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09c.38.07.73.24 1 .51a1.65 1.65 0 0 0 1.82.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 8c.07.38.24.73.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-.51 1z"/></svg>
  Configurazione Backend
</div>
                        <p class="settings-description">
                            Modifica gli URL per connettere l'app al tuo Google Sheet e Apps Script.
                        </p>
                        <div style="padding: 0 var(--space-md) var(--space-md) var(--space-md);"> <!-- Aggiunto padding se necessario dentro la card -->
                            <div class="form-group">
                                <label for="appsScriptUrlInput">URL Google Apps Script:</label>
                                <input type="url" id="appsScriptUrlInput" name="appsScriptUrlInput" class="form-input" placeholder="https://script.google.com/macros/s/...">
                            </div>
                            <div class="form-group">
                                <label for="sheetIdInput">ID Google Sheet:</label>
                                <input type="text" id="sheetIdInput" name="sheetIdInput" class="form-input" placeholder="ID del tuo foglio Google">
                            </div>
                            <div class="form-group">
                                <label for="lookerUrlInput">URL Looker Studio (Opzionale):</label>
                                <input type="url" id="lookerUrlInput" name="lookerUrlInput" class="form-input" placeholder="URL della tua dashboard Looker Studio">
                            </div>
                            <button id="saveBackendConfigBtn" class="btn btn--primary" style="width: 100%;">Salva Configurazione Backend</button>
                            <div id="backendConfigMessage" class="message hidden" style="margin-top: var(--space-md);"></div>
                        </div>
                    </div>

                    <!-- App Info -->
                    <div class="card">
                        <div class="card-title"> <!-- â„¹ï¸ Informazioni App -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="8"/></svg>
  Informazioni App
</div>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Versione</span>
                                <span class="info-value">v1.5 PWA</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ultima connessione</span>
                                <span class="info-value" id="lastConnection">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Stato</span>
                                <span class="info-value" id="appStatus"> <!-- ðŸŸ¢ -->
  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" stroke="#34C759" fill="#34C759"/></svg>
  Operativo
</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="dashboard">
                <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="12" width="4" height="8"/><rect x="9" y="8" width="4" height="12"/><rect x="15" y="4" width="4" height="16"/></svg>
                <span class="nav-label">Dashboard</span>
            </button>
            <button class="nav-item" data-page="transaction">
                <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                <span class="nav-label">Transazioni</span>
            </button>
            <button class="nav-item nav-item--add" data-page="addTransaction">
                <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon nav-icon--add" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                <span class="nav-label">Aggiungi</span>
            </button>
            <button class="nav-item" data-page="shared">
                <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                <span class="nav-label">Condivise</span>
            </button>
            <button class="nav-item" data-page="settings">
                <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 5 15.4a1.65 1.65 0 0 0-1.51-1V13a2 2 0 0 1 0-4v-.09A1.65 1.65 0 0 0 4.6 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09c.38.07.73.24 1 .51a1.65 1.65 0 0 0 1.82.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 8c.07.38.24.73.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-.51 1z"/></svg>
                <span class="nav-label">Impostazioni</span>
            </button>
        </nav>

        <!-- Sticky Submit Button (only visible on add transaction page) -->
        <div class="sticky-submit" id="stickySubmit">
            <button type="submit" form="transactionForm" class="btn btn--submit btn--expense" id="submitBtnSticky">
                <span id="submitTextSticky">Salva Transazione</span>
                <span id="submitSpinnerSticky" class="spinner hidden"></span>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
